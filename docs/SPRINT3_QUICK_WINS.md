# üéÅ Sprint 3: Quick Wins M√∫ltiples

**Fecha de Inicio:** 23 de octubre de 2025  
**Duraci√≥n:** 1 semana (10-12 horas efectivas)  
**Enfoque:** Mejoras peque√±as con alto impacto visible  
**Estado:** üöÄ EN DESARROLLO

---

## üìã √çndice

1. [Resumen Ejecutivo](#resumen-ejecutivo)
2. [Features a Implementar](#features-a-implementar)
3. [Arquitectura y Componentes](#arquitectura-y-componentes)
4. [Plan de Implementaci√≥n](#plan-de-implementaci√≥n)
5. [Testing](#testing)
6. [M√©tricas de √âxito](#m√©tricas-de-√©xito)

---

## üéØ Resumen Ejecutivo

### Objetivo
Implementar **5 mejoras incrementales** que sean individualmente peque√±as pero que en conjunto generen una sensaci√≥n de "muchas mejoras" y progreso constante.

### Caracter√≠sticas Principales
- ‚úÖ Cada feature es **independiente** (se puede hacer en cualquier orden)
- ‚úÖ Todas son **visibles** para el usuario
- ‚úÖ **Alto impacto** en satisfacci√≥n de usuario
- ‚úÖ **Bajo riesgo** t√©cnico
- ‚úÖ **R√°pidas** de implementar

---

## ‚ú® Features a Implementar

### 1. ‚≠ê Favoritos de Productos
**Duraci√≥n:** 2-3 horas  
**Prioridad:** ALTA

**Funcionalidad:**
- Usuario puede marcar productos como favoritos con ‚≠ê
- Secci√≥n "Mis Favoritos" en p√°gina de cat√°logo
- Persistencia en BD (para usuarios autenticados) y localStorage (demo)
- Contador de favoritos en header
- A√±adir producto desde favoritos con 1 clic

**Flujo UX:**
1. Usuario ve producto en cat√°logo
2. Click en icono ‚≠ê (outline ‚Üí filled con animaci√≥n)
3. Toast: "A√±adido a favoritos"
4. En tab "Mis Favoritos" del cat√°logo, ver todos los favoritos
5. Bot√≥n "A√±adir a lista" m√°s prominente

**Impacto:** Acceso r√°pido a productos que siempre compras

---

### 2. üîÑ Productos Recurrentes
**Duraci√≥n:** 3-4 horas  
**Prioridad:** ALTA

**Funcionalidad:**
- Sistema detecta autom√°ticamente productos que aparecen en m√∫ltiples listas
- Badge "Compras seguido" en productos recurrentes
- Al crear nueva lista, sugerir productos recurrentes
- Secci√≥n "Tus B√°sicos" en cat√°logo con productos recurrentes

**L√≥gica de Detecci√≥n:**
- Producto aparece en 3+ de las √∫ltimas 5 listas ‚Üí recurrente
- Se actualiza cada vez que se guarda una lista
- Se almacena en perfil de usuario

**Flujo UX:**
1. Usuario crea varias listas con leche, pan, huevos
2. Sistema detecta que son recurrentes
3. Al crear nueva lista, muestra sugerencia: "¬øA√±adir tus b√°sicos? (3 productos)"
4. Usuario acepta ‚Üí se a√±aden autom√°ticamente
5. Ahorra tiempo en cada lista nueva

**Impacto:** 40-50% menos tiempo creando listas nuevas

---

### 3. ‚úÖ Modo Compra (Checklist con Confetti)
**Duraci√≥n:** 3-4 horas  
**Prioridad:** ALTA

**Funcionalidad:**
- Toggle "Modo Compra" en ResultsPage
- Vista optimizada para comprar en supermercado
- Checkbox grande junto a cada producto
- Barra de progreso visual (X de Y comprados)
- Productos comprados se mueven al final y se tachan
- **Confetti animado üéâ al completar todos**

**Flujo UX:**
1. Usuario abre lista guardada
2. Click en bot√≥n "Iniciar Compra" (üõí)
3. Vista cambia: checkboxes grandes, productos agrupados por categor√≠a
4. Usuario va marcando productos mientras compra
5. Barra de progreso: "15/20 productos (75%)"
6. Al marcar el √∫ltimo ‚Üí Confetti üéâ + "¬°Lista completada!"
7. Bot√≥n "Finalizar compra" guarda estado

**Detalles T√©cnicos:**
- Estado de compra se guarda en localStorage (temporal)
- Se puede pausar y continuar despu√©s
- Opci√≥n de resetear progreso

**Impacto:** Experiencia gamificada, hace compras m√°s divertidas

---

### 4. üîç B√∫squeda Mejorada en Cat√°logo
**Duraci√≥n:** 2-3 horas  
**Prioridad:** MEDIA

**Funcionalidad:**
- Mejorar b√∫squeda fuzzy existente (ya funciona con Fuse.js)
- A√±adir filtros visuales:
  - Por categor√≠a (dropdown)
  - Por rango de precio (slider)
  - Por disponibilidad (en stock)
- Ordenar resultados:
  - Por relevancia (default)
  - Por precio: menor a mayor
  - Por precio: mayor a menor
  - Alfab√©tico
- Chips de filtros activos (removibles)

**Flujo UX:**
1. Usuario busca "leche"
2. Muestra resultados fuzzy (ya funciona)
3. Puede filtrar por categor√≠a: "L√°cteos"
4. Puede filtrar por precio: 1‚Ç¨ - 3‚Ç¨
5. Chips visibles: "L√°cteos" [x], "1‚Ç¨-3‚Ç¨" [x]
6. Click en [x] quita el filtro

**Impacto:** Encontrar productos 60% m√°s r√°pido

---

### 5. üåô Dark Mode Persistente
**Duraci√≥n:** 1-2 horas  
**Prioridad:** BAJA (pero f√°cil)

**Funcionalidad:**
- Guardar preferencia de dark mode en localStorage
- Toggle visible en header/navbar
- Transici√≥n suave entre modos
- Respetar preferencia del sistema como default

**Flujo UX:**
1. Usuario hace clic en icono üåô/‚òÄÔ∏è en header
2. Modo cambia con animaci√≥n suave
3. Preferencia se guarda autom√°ticamente
4. Al volver, se carga su preferencia guardada

**Detalles T√©cnicos:**
- Ya existe soporte de dark mode en Tailwind
- Solo falta: persistencia + toggle UI

**Impacto:** Comodidad, especialmente para uso nocturno

---

## üèóÔ∏è Arquitectura y Componentes

### Nuevos Hooks

#### `useFavorites.ts`
```typescript
export const useFavorites = () => {
  const [favorites, setFavorites] = useState<number[]>([])
  
  const toggleFavorite = (productId: number) => { }
  const isFavorite = (productId: number) => boolean
  const getFavorites = () => Product[]
  
  return { favorites, toggleFavorite, isFavorite, getFavorites }
}
```

#### `useRecurrentProducts.ts`
```typescript
export const useRecurrentProducts = () => {
  const [recurrentProducts, setRecurrentProducts] = useState<number[]>([])
  
  const detectRecurrent = () => { }
  const getRecurrent = () => Product[]
  const suggestRecurrent = () => Product[]
  
  return { recurrentProducts, detectRecurrent, getRecurrent, suggestRecurrent }
}
```

#### `useShoppingMode.ts`
```typescript
export const useShoppingMode = () => {
  const [checkedItems, setCheckedItems] = useState<Set<number>>(new Set())
  const [isComplete, setIsComplete] = useState(false)
  
  const toggleCheck = (productId: number) => { }
  const getProgress = () => { completed: number, total: number, percentage: number }
  const reset = () => { }
  
  return { checkedItems, toggleCheck, getProgress, reset, isComplete }
}
```

#### `useDarkMode.ts`
```typescript
export const useDarkMode = () => {
  const [isDark, setIsDark] = useState(false)
  
  const toggle = () => { }
  const enable = () => { }
  const disable = () => { }
  
  return { isDark, toggle, enable, disable }
}
```

---

### Nuevos Componentes

#### `FavoriteButton.tsx`
- Bot√≥n estrella (outline/filled)
- Animaci√≥n al toggle
- Toast feedback

#### `FavoritesTab.tsx`
- Tab en CatalogPage
- Grid de productos favoritos
- Bot√≥n "A√±adir a lista" prominente

#### `RecurrentSuggestion.tsx`
- Banner de sugerencia
- Lista de productos recurrentes
- Bot√≥n "A√±adir todos"

#### `ShoppingModeView.tsx`
- Vista optimizada para compra
- Checkboxes grandes
- Barra de progreso
- Confetti component

#### `ProgressBar.tsx`
- Barra visual de progreso
- Porcentaje y contador
- Animaci√≥n smooth

#### `ConfettiCelebration.tsx`
- Animaci√≥n de confetti
- Triggered al completar
- Auto-dismiss despu√©s de 3s

#### `SearchFilters.tsx`
- Filtros visuales (categor√≠a, precio)
- Chips de filtros activos
- Dropdown de ordenamiento

#### `DarkModeToggle.tsx`
- Toggle switch üåô/‚òÄÔ∏è
- Animaci√≥n de transici√≥n
- Tooltip explicativo

---

### Modificaciones en Componentes Existentes

#### `CatalogPage.tsx`
- A√±adir `FavoritesTab`
- Integrar `SearchFilters`
- A√±adir `RecurrentSuggestion` al inicio

#### `ProductCard.tsx`
- A√±adir `FavoriteButton` en esquina
- Mostrar badge "Compras seguido" si aplica

#### `ResultsPage.tsx`
- A√±adir bot√≥n "Modo Compra"
- Toggle entre vista normal y `ShoppingModeView`

#### `Header.tsx` / `Navbar.tsx`
- A√±adir `DarkModeToggle`
- A√±adir contador de favoritos (opcional)

---

## üìÖ Plan de Implementaci√≥n

### D√≠a 1-2: Favoritos (2-3h)
- [x] Crear hook `useFavorites`
- [x] Crear componente `FavoriteButton`
- [x] Crear componente `FavoritesTab`
- [x] Integrar en `CatalogPage`
- [x] Integrar en `ProductCard`
- [x] Testing b√°sico

### D√≠a 3-4: Productos Recurrentes (3-4h)
- [ ] Crear hook `useRecurrentProducts`
- [ ] L√≥gica de detecci√≥n en `useListHistory`
- [ ] Crear componente `RecurrentSuggestion`
- [ ] Integrar en `CatalogPage`
- [ ] Badge en `ProductCard`
- [ ] Testing b√°sico

### D√≠a 5: Modo Compra (3-4h)
- [ ] Crear hook `useShoppingMode`
- [ ] Crear componente `ShoppingModeView`
- [ ] Crear componente `ProgressBar`
- [ ] Crear componente `ConfettiCelebration`
- [ ] Integrar en `ResultsPage`
- [ ] Testing b√°sico

### D√≠a 6: B√∫squeda Mejorada (2-3h)
- [ ] Crear componente `SearchFilters`
- [ ] Implementar filtros de categor√≠a y precio
- [ ] Implementar ordenamiento
- [ ] Chips de filtros activos
- [ ] Integrar en `CatalogPage`
- [ ] Testing b√°sico

### D√≠a 7: Dark Mode + Testing Final (1-2h + 1h)
- [ ] Crear hook `useDarkMode`
- [ ] Crear componente `DarkModeToggle`
- [ ] Integrar en `Header`
- [ ] Testing completo de todas las features
- [ ] Documentaci√≥n de testing

---

## üß™ Testing

### Test Cases por Feature

#### Favoritos (8 casos)
1. Marcar producto como favorito
2. Desmarcar favorito
3. Ver lista de favoritos
4. A√±adir desde favoritos a lista
5. Favoritos persisten en reload
6. Favoritos en modo demo (localStorage)
7. Favoritos en modo autenticado (BD)
8. Animaci√≥n de toggle

#### Recurrentes (6 casos)
1. Detecci√≥n autom√°tica de recurrentes
2. Badge "Compras seguido" visible
3. Sugerencia al crear nueva lista
4. A√±adir todos los recurrentes
5. Actualizaci√≥n al guardar lista
6. Secci√≥n "Tus B√°sicos" en cat√°logo

#### Modo Compra (10 casos)
1. Activar modo compra
2. Marcar producto como comprado
3. Desmarcar producto
4. Barra de progreso actualiza
5. Productos comprados se tachan
6. Productos comprados al final
7. Confetti al completar todos
8. Pausar y continuar
9. Resetear progreso
10. Finalizar compra

#### B√∫squeda Mejorada (7 casos)
1. B√∫squeda fuzzy funciona
2. Filtrar por categor√≠a
3. Filtrar por precio
4. Ordenar por precio
5. Chips de filtros visibles
6. Remover filtros con [x]
7. Combinar m√∫ltiples filtros

#### Dark Mode (4 casos)
1. Toggle entre modos
2. Persistencia en reload
3. Transici√≥n suave
4. Default seg√∫n sistema

**Total:** 35 test cases

---

## üì¶ Dependencias Nuevas

```json
{
  "canvas-confetti": "^1.9.3",
  "react-use": "^17.5.1"
}
```

---

## üìà M√©tricas de √âxito

### KPIs por Feature

#### Favoritos
- **M√©trica:** % de usuarios que marcan favoritos
- **Target:** > 40% de usuarios activos

#### Recurrentes
- **M√©trica:** Tiempo promedio para crear lista
- **Target:** Reducci√≥n de 40-50%

#### Modo Compra
- **M√©trica:** % de listas completadas con modo compra
- **Target:** > 30% de listas abiertas

#### B√∫squeda Mejorada
- **M√©trica:** Tiempo para encontrar producto
- **Target:** Reducci√≥n de 60%

#### Dark Mode
- **M√©trica:** % de usuarios usando dark mode
- **Target:** > 25% de usuarios

---

## üéØ Criterios de Aceptaci√≥n

### Favoritos ‚≠ê
- [x] Usuario puede marcar/desmarcar favoritos
- [x] Favoritos persisten en reload
- [x] Tab "Mis Favoritos" muestra todos los favoritos
- [x] Toast feedback en cada acci√≥n
- [x] Animaci√≥n suave en toggle

### Recurrentes üîÑ
- [ ] Sistema detecta productos recurrentes (3+ apariciones en 5 listas)
- [ ] Badge visible en productos recurrentes
- [ ] Sugerencia al crear nueva lista
- [ ] Bot√≥n "A√±adir todos" funciona
- [ ] Secci√≥n "Tus B√°sicos" en cat√°logo

### Modo Compra ‚úÖ
- [ ] Toggle activa/desactiva modo compra
- [ ] Checkboxes marcan productos
- [ ] Barra de progreso muestra porcentaje correcto
- [ ] Productos comprados se tachan y mueven
- [ ] Confetti aparece al completar todos
- [ ] Puede pausar y continuar

### B√∫squeda Mejorada üîç
- [ ] Filtros de categor√≠a funcionan
- [ ] Filtros de precio funcionan
- [ ] Ordenamiento funciona (4 opciones)
- [ ] Chips de filtros removibles
- [ ] Resultados se actualizan en tiempo real

### Dark Mode üåô
- [ ] Toggle cambia entre modos
- [ ] Preferencia se guarda en localStorage
- [ ] Transici√≥n suave (no abrupta)
- [ ] Default respeta preferencia del sistema

---

## üöÄ Estado de Implementaci√≥n

| Feature | Estado | Progreso | Tiempo |
|---------|--------|----------|--------|
| ‚≠ê Favoritos | üöÄ EN DESARROLLO | 0% | 0/3h |
| üîÑ Recurrentes | ‚è≥ PENDIENTE | 0% | 0/4h |
| ‚úÖ Modo Compra | ‚è≥ PENDIENTE | 0% | 0/4h |
| üîç B√∫squeda | ‚è≥ PENDIENTE | 0% | 0/3h |
| üåô Dark Mode | ‚è≥ PENDIENTE | 0% | 0/2h |

**Progreso Total:** 0% (0/16 horas)

---

## üìù Notas de Desarrollo

### Priorizaci√≥n Flexible
- Cada feature es independiente
- Se puede cambiar el orden seg√∫n necesidad
- Si una feature se complica, se puede posponer

### Quick Wins Philosophy
- Cada feature debe ser "shippable" individualmente
- No esperar a completar todas para hacer deploy
- Deploy incremental despu√©s de cada 2-3 features

---

**√öltima actualizaci√≥n:** 23 de octubre de 2025  
**Pr√≥ximo Sprint:** Sprint 4 - Opci√≥n A (UX de Resultados y Men√∫s)

